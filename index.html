<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Smart Salon</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Hind+Siliguri:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <meta name="theme-color" content="#0f172a">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Smart Salon">
    
    <!-- Premium Icons (Fixed Base64 Scissors Logo) -->
    <link rel="icon" type="image/png" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMAAAADACAYAAABS3GwHAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH6AMQCisSBy88ygAAGXNJREFUeNrtXFtsFNcZ/s6Z2fX6An7AxmCInSZXS9pKaZpWpS99oU8N8pS0D02lSjt96EPUt6pS2qrUPlSVSvWhqu0DbeXhS6X2oWoaC60UVYmSAnYIdgx2fMGv9Xp3Z87pQ87urms767V7Z73reP5IsuecmfOf73z/+f//nP8M6K9+PZ6V0fUu6C96Cej0EtDpJaDTS0Cn/7fH9Oofj8f37dvH9PT0MD09TbXWv997Ym7at28f09PTzDT77B/L0UfX6pXp87k9PT1mZmaGmY8++sd09NG1enm9mZ9+87D56V6Z+Z9//ofv9H++T3Xp6P8XAnS9C/qLXgI6vQR0egno9BLQ6f+N6eU5vTAnF8f0wpzc4zM9+uha/X297P8pArS3B8D992f02V6Z3Sszv7Y7B+7v00mX6vK679Vl+n9LQP/vY3p5Ti/M939uX993v7b/">
    <link rel="apple-touch-icon" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMAAAADACAYAAABS3GwHAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH6AMQCisSBy88ygAAGXNJREFUeNrtXFtsFNcZ/s6Z2fX6An7AxmCInSZXS9pKaZpWpS99oU8N8pS0D02lSjt96EPUt6pS2qrUPlSVSvWhqu0DbeXhS6X2oWoaC60UVYmSAnYIdgx2fMGv9Xp3Z87pQ87urms767V7Z73reP5IsuecmfOf73z/+f//nP8M6K9+PZ6V0fUu6C96Cej0EtDpJaDTS0Cn/7fH9Oofj8f37dvH9PT0MD09TbXWv997Ym7at28f09PTzDT77B/L0UfX6pXp87k9PT1mZmaGmY8++sd09NG1enm9mZ9+87D56V6Z+Z9//ofv9H++T3Xp6P8XAnS9C/qLXgI6vQR0egno9BLQ6f+N6eU5vTAnF8f0wpzc4zM9+uha/X297P8pArS3B8D992f02V6Z3Sszv7Y7B+7v00mX6vK679Vl+n9LQP/vY3p5Ti/M939uX993v7b/">
    
    <link rel="manifest" href="manifest.json">
    <style>
        body { font-family: 'Hind Siliguri', sans-serif; background-color: #0f172a; color: #f8fafc; -webkit-tap-highlight-color: transparent; }
        .gradient-gold { background: linear-gradient(to right, #fbbf24, #d97706); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        .glass-modal { background: rgba(15, 23, 42, 0.9); backdrop-filter: blur(20px); -webkit-backdrop-filter: blur(20px); border: 1px solid rgba(251, 191, 36, 0.3); box-shadow: 0 0 50px rgba(251, 191, 36, 0.15); }
        
        @keyframes zoomIn {
            from { opacity: 0; transform: scale(0.9) translateY(20px); }
            to { opacity: 1; transform: scale(1) translateY(0); }
        }
        .animate-zoom-in { animation: zoomIn 0.5s cubic-bezier(0.34, 1.56, 0.64, 1) forwards; }
    </style>
<script type="importmap">
{
  "imports": {
    "@supabase/supabase-js": "https://esm.sh/@supabase/supabase-js@^2.95.3",
    "react-dom/": "https://esm.sh/react-dom@^19.2.4/",
    "react/": "https://esm.sh/react@^19.2.4/",
    "react": "https://esm.sh/react@^19.2.4"
  }
}
</script>
</head>
<body class="overflow-x-hidden">
    <div id="root"></div>

    <!-- PREMIUM PWA INSTALL MODAL -->
    <div id="pwa-modal" class="hidden fixed inset-0 z-[10000] flex items-center justify-center p-6">
        <div class="absolute inset-0 bg-slate-950/60 backdrop-blur-sm" onclick="closePwaModal()"></div>
        <div class="glass-modal w-full max-w-sm p-10 rounded-[48px] relative animate-zoom-in text-center space-y-8">
            <div class="flex justify-center">
                <div class="w-24 h-24 bg-amber-500/10 rounded-[32px] flex items-center justify-center border border-amber-500/20 shadow-lg shadow-amber-950/20">
                    <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMAAAADACAYAAABS3GwHAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH6AMQCisSBy88ygAAGXNJREFUeNrtXFtsFNcZ/s6Z2fX6An7AxmCInSZXS9pKaZpWpS99oU8N8pS0D02lSjt96EPUt6pS2qrUPlSVSvWhqu0DbeXhS6X2oWoaC60UVYmSAnYIdgx2fMGv9Xp3Z87pQ87urms767V7Z73reP5IsuecmfOf73z/+f//nP8M6K9+PZ6V0fUu6C96Cej0EtDpJaDTS0Cn/7fH9Oofj8f37dvH9PT0MD09TbXWv997Ym7at28f09PTzDT77B/L0UfX6pXp87k9PT1mZmaGmY8++sd09NG1enm9mZ9+87D56V6Z+Z9//ofv9H++T3Xp6P8XAnS9C/qLXgI6vQR0egno9BLQ6f+N6eU5vTAnF8f0wpzc4zM9+uha/X297P8pArS3B8D992f02V6Z3Sszv7Y7B+7v00mX6vK679Vl+n9LQP/vY3p5Ti/M939uX993v7b/" class="w-16 h-16 drop-shadow-2xl" alt="Logo">
                </div>
            </div>
            <div class="space-y-3">
                <h2 class="text-3xl font-black gradient-gold tracking-tight leading-tight">Smart Salon অ্যাপটি ইন্সটল করুন</h2>
                <p class="text-slate-400 text-sm font-medium leading-relaxed">সেরা অভিজ্ঞতা এবং রিয়েল-টাইম নোটিফিকেশন পেতে অ্যাপটি আপনার হোম স্ক্রিনে যোগ করুন।</p>
            </div>
            <div class="space-y-4 pt-4">
                <button onclick="initPwaInstall()" class="w-full bg-gradient-to-r from-amber-400 to-amber-600 text-slate-950 font-black py-5 rounded-[24px] shadow-xl active:scale-95 transition-all uppercase tracking-widest text-sm">
                    এখনই ইন্সটল করুন
                </button>
                <button onclick="closePwaModal()" class="w-full text-slate-500 font-bold text-[10px] uppercase tracking-widest py-2 hover:text-slate-300">
                    পরে করবো
                </button>
            </div>
        </div>
    </div>

    <!-- PWA INSTALL BANNER (Floating Small) -->
    <div id="pwa-install-banner" class="hidden fixed bottom-28 left-6 right-6 z-[45] animate-in slide-in-from-bottom duration-700">
        <div class="bg-gradient-to-r from-amber-400 to-amber-600 p-4 rounded-3xl shadow-2xl flex items-center justify-between gap-4">
            <div class="flex items-center gap-3">
                <div class="w-10 h-10 bg-slate-950 rounded-xl flex items-center justify-center shrink-0">
                    <svg class="w-6 h-6 text-amber-500" fill="currentColor" viewBox="0 0 24 24"><path d="M12,2A10,10,0,1,0,22,12,10,10,0,0,0,12,2Zm1,14H11V13h2Zm0-5H11V7h2Z"/></svg>
                </div>
                <p class="text-slate-950 font-black text-[10px] leading-tight uppercase tracking-tight">সেরা অভিজ্ঞতার জন্য অ্যাপটি ইনস্টল করুন</p>
            </div>
            <button onclick="initPwaInstall()" class="bg-slate-950 text-amber-500 px-4 py-2.5 rounded-2xl text-[10px] font-black uppercase tracking-widest active:scale-90 transition-all shadow-xl">
                ইনস্টল
            </button>
        </div>
    </div>

    <script type="module" src="index.tsx"></script>
    <script>
      // SW Registration Logic with proper relative path for sandbox safety
      if ('serviceWorker' in navigator) {
        window.addEventListener('load', () => {
          // Use a simple relative path which the browser will resolve against the current origin
          navigator.serviceWorker.register('./sw.js').then(reg => {
            console.log('SW Registered:', reg.scope);
          }).catch(err => {
            // Log but don't crash if SW fails in sandbox previews
            console.warn('ServiceWorker registration failed (common in sandbox):', err.message);
          });
        });
      }

      // PWA Install Prompt Logic
      let deferredPrompt;
      window.addEventListener('beforeinstallprompt', (e) => {
        e.preventDefault();
        deferredPrompt = e;
        // Show banner after 5 seconds if not already standalone
        if (!window.matchMedia('(display-mode: standalone)').matches) {
            setTimeout(() => {
                const banner = document.getElementById('pwa-install-banner');
                if(banner) banner.classList.remove('hidden');
            }, 5000);
        }
      });

      async function initPwaInstall() {
        if (deferredPrompt) {
            deferredPrompt.prompt();
            const { outcome } = await deferredPrompt.userChoice;
            deferredPrompt = null;
            document.getElementById('pwa-install-banner')?.classList.add('hidden');
            closePwaModal();
        }
      }

      function closePwaModal() {
        const modal = document.getElementById('pwa-modal');
        if(modal) modal.classList.add('hidden');
      }
    </script>
</body>
</html>